<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Digital Twin</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<header class="app-header">
		<h1>Battery Digital Twin</h1>
		<p class="subtitle">Your battery's data in real-time</p>
	</header>

	<section class="controls">
		<div class="control-group">
			<label for="range">Range (A1 notation)</label>
			<input id="range" type="text" placeholder="Sheet1!A1:E50" value="Sheet1!A1:E50" autocomplete="off">
		</div>
		<div class="control-group">
			<label for="intervalSec">Refresh every (seconds)</label>
			<input id="intervalSec" type="number" min="1" step="1" value="1">
		</div>
		<div class="buttons">
			<button id="saveConfig">Save</button>
			<button id="refreshNow">Refresh now</button>
		</div>
		<p class="note">Backend mode: This app reads a private Google Sheet via a secured server endpoint. Configure your `SHEET_ID` and `creds.json` on the server. URL params supported: <code>?range=Sheet1!A1:E50&interval=1</code>.</p>
	</section>

	<section class="status-bar">
		<div id="status">Waiting for configuration…</div>
		<div id="lastUpdated"></div>
	</section>

	<main>
		<section class="dashboard">
			<div class="gauge-card">
				<h2>SOC</h2>
				<canvas id="socGauge" width="240" height="140"></canvas>
				<div class="gauge-label"><span id="socVal">--%</span></div>
				<div class="mini-list">
					<div>SOC_cc: <strong id="socCcVal">--%</strong></div>
					<div>SOC_model: <strong id="socModelVal">--%</strong></div>
				</div>
			</div>
			<div class="stat-card">
				<h3>Voltage</h3>
				<div class="stat-value"><span id="voltVal">--</span> <span class="unit">V</span></div>
				<div class="subtle">Model: <span id="voltModelVal">--</span> V</div>
				<canvas id="voltSpark" width="320" height="120"></canvas>
			</div>
			<div class="stat-card">
				<h3>Current</h3>
				<div class="stat-value"><span id="currVal">--</span> <span class="unit">A</span></div>
				<canvas id="currSpark" width="320" height="120"></canvas>
			</div>
			<div class="stat-card">
				<h3>Temperature</h3>
				<div class="stat-value"><span id="tempVal">--</span> <span class="unit">°C</span></div>
				<canvas id="tempSpark" width="280" height="64"></canvas>
			</div>
			<div class="stat-card">
				<h3>Status</h3>
				<div class="stat-value"><span id="stateVal">--</span></div>
				<div class="subtle">Timestamp: <span id="tsVal">--</span></div>
			</div>
		</section>

		<div class="table-container">
			<table id="dataTable" class="data-table">
				<thead id="tableHead"></thead>
				<tbody id="tableBody"></tbody>
			</table>
		</div>
	</main>

	<footer class="app-footer">
		<a href="README.md" target="_blank" rel="noopener">Setup instructions</a>
	</footer>

	<script src="script.js"></script>
</body>
</html>
